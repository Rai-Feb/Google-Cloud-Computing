<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Cloud Computing - Sign In</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="auth-page">
        
        <div class="auth-card" id="login-box">
            <div class="auth-header">
                <div class="google-logo">
                    <span class="blue">G</span><span class="red">o</span><span class="yellow">o</span><span class="blue">g</span><span class="green">l</span><span class="red">e</span>
                </div>
                <h2>Sign in</h2>
                <p>to continue to Cloud Computing</p>
            </div>
            
            <div class="auth-form">
                <div class="input-group">
                    <input type="text" id="login-user" required placeholder=" ">
                    <label>Username</label>
                </div>
                <div class="input-group">
                    <input type="password" id="login-pass" required placeholder=" ">
                    <label>Password</label>
                    <i class="fa-solid fa-eye toggle-password" onclick="togglePassword('login-pass', this)"></i>
                </div>
                <p id="login-error" class="error-msg"></p>
                
                <div class="auth-actions">
                    <a href="#" onclick="showRegister()">Create account</a>
                    <button onclick="handleLogin()" id="btn-login">Next</button>
                </div>
            </div>
        </div>

        <div class="auth-card" id="register-box" style="display: none;">
            <div class="auth-header">
                <div class="google-logo">
                    <span class="blue">G</span><span class="red">o</span><span class="yellow">o</span><span class="blue">g</span><span class="green">l</span><span class="red">e</span>
                </div>
                <h2>Create Account</h2>
                <p>Register to access the server</p>
            </div>
            
            <div class="auth-form">
                <div class="input-group">
                    <input type="text" id="reg-user" required placeholder=" ">
                    <label>New Username</label>
                </div>
                <div class="input-group">
                    <input type="password" id="reg-pass" required placeholder=" ">
                    <label>Password</label>
                    <i class="fa-solid fa-eye toggle-password" onclick="togglePassword('reg-pass', this)"></i>
                </div>
                <p id="reg-error" class="error-msg"></p>
                
                <div class="auth-actions">
                    <a href="#" onclick="showLogin()">Sign in instead</a>
                    <button onclick="handleRegister()" id="btn-reg">Register</button>
                </div>
            </div>
        </div>

    </div>

    <div id="main-app" style="display: none;">
        
        <nav class="navbar">
            <div class="logo-container">
                <span class="logo-g blue">G</span><span class="logo-g red">o</span><span class="logo-g yellow">o</span><span class="logo-g blue">g</span><span class="green">l</span><span class="red">e</span>
                <span class="logo-text">Cloud Computing</span>
            </div>
            <div class="nav-menu">
                <span id="user-display" style="margin-right: 15px; font-weight: 600; color: #5f6368;"></span>
                <a href="#" onclick="logout()" class="btn-logout">Log out</a>
            </div>
        </nav>

        <header class="hero">
            <div class="container hero-center">
                <span class="pill">Tim Lagi Men-deploy</span>
                <h1>Scalable Infrastructure <br> on <span class="blue">Compute Engine</span>.</h1>
                <p>Website Kelompok 1</p>
                <div class="hero-buttons">
                    <a href="#team" class="btn-primary">View Members</a>
                </div>
            </div>
        </header>

        <section id="team" class="team-section">
            <div class="container">
                <h2 class="section-heading" style="text-align: center; margin-bottom: 40px; font-size: 28px;">Our Team</h2>
                <div class="team-grid">
                    
                    <div class="g-card border-blue">
                        <div class="card-top">
                            <div class="photo-frame frame-blue">
                                <img src="foto1.jpg" onerror="this.src='https://via.placeholder.com/150/1a73e8/ffffff?text=A1'" alt="Foto 1">
                            </div>
                            <div class="badge badge-blue">STEERING COMMITEE</div>
                        </div>
                        <h3>Raihan Febriahdi</h3>
                        <p class="nim">NPM: 2410631170163</p>
                        <p class="desc">Mengelola konfigurasi VPC Network, Firewall Rules, dan manajemen SSH Key.</p>
                    </div>

                    <div class="g-card border-red">
                        <div class="card-top">
                            <div class="photo-frame frame-red">
                                <img src="foto2.jpg" onerror="this.src='https://via.placeholder.com/150/ea4335/ffffff?text=A2'" alt="Foto 2">
                            </div>
                            <div class="badge badge-red">STEERING COMMITEE</div>
                        </div>
                        <h3>Agustinus Jansen Simamora</h3>
                        <p class="nim">NPM: 2410631170055</p>
                        <p class="desc">Bertanggung jawab instalasi Server, konfigurasi Linux, dan Keamanan Sistem.</p>
                    </div>

                    <div class="g-card border-yellow">
                        <div class="card-top">
                            <div class="photo-frame frame-yellow">
                                <img src="foto3.jpg" onerror="this.src='https://via.placeholder.com/150/fbbc04/ffffff?text=A3'" alt="Foto 3">
                            </div>
                            <div class="badge badge-yellow">STEERING COMMITEE</div>
                        </div>
                        <h3>Inong Muliya Zahra</h3>
                        <p class="nim">NPM: 2410631170145</p>
                        <p class="desc">Merancang antarmuka pengguna yang responsif serta integrasi Login API.</p>
                    </div>

                </div>
            </div>
        </section>

        <footer>
            <div class="container footer-flex">
                <div class="copyright">&copy; 2025 Final Project Cloud Computing.</div>
            </div>
        </footer>
    </div>

    <script>
        // --- FITUR BARU: SHOW/HIDE PASSWORD ---
        function togglePassword(inputId, iconElement) {
            const input = document.getElementById(inputId);
            if (input.type === "password") {
                input.type = "text";
                // Ganti icon jadi mata dicoret (slash)
                iconElement.classList.remove('fa-eye');
                iconElement.classList.add('fa-eye-slash');
            } else {
                input.type = "password";
                // Ganti icon jadi mata biasa
                iconElement.classList.remove('fa-eye-slash');
                iconElement.classList.add('fa-eye');
            }
        }

        // Cek sesi login
        const loggedUser = localStorage.getItem('username');
        if (loggedUser) {
            enterDashboard(loggedUser);
        }

        // --- FUNGSI NAVIGASI ---
        function showRegister() {
            document.getElementById('login-box').style.display = 'none';
            document.getElementById('register-box').style.display = 'block';
            clearErrors();
        }

        function showLogin() {
            document.getElementById('register-box').style.display = 'none';
            document.getElementById('login-box').style.display = 'block';
            clearErrors();
        }

        function clearErrors() {
            document.getElementById('login-error').innerText = '';
            document.getElementById('reg-error').innerText = '';
        }

        // --- FUNGSI API LOGIN ---
        async function handleLogin() {
            const user = document.getElementById('login-user').value;
            const pass = document.getElementById('login-pass').value;
            const btn = document.getElementById('btn-login');
            const err = document.getElementById('login-error');

            if(!user || !pass) return;

            btn.innerText = "Working...";
            btn.disabled = true;

            try {
                const res = await fetch('/api/login', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ username: user, password: pass })
                });
                const data = await res.json();

                if(data.success) {
                    enterDashboard(user);
                } else {
                    err.innerText = data.message;
                    btn.innerText = "Next";
                    btn.disabled = false;
                }
            } catch (e) {
                err.innerText = "Server Error";
                btn.disabled = false;
            }
        }

        // --- FUNGSI API REGISTER ---
        async function handleRegister() {
            const user = document.getElementById('reg-user').value;
            const pass = document.getElementById('reg-pass').value;
            const btn = document.getElementById('btn-reg');
            const err = document.getElementById('reg-error');

            if(!user || !pass) return;

            btn.innerText = "Creating...";
            btn.disabled = true;

            try {
                const res = await fetch('/api/register', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ username: user, password: pass })
                });
                const data = await res.json();

                if(data.success) {
                    alert("Akun berhasil dibuat! Silakan Login.");
                    showLogin();
                    // Auto fill username
                    document.getElementById('login-user').value = user;
                } else {
                    err.innerText = data.message;
                }
                btn.innerText = "Register";
                btn.disabled = false;
            } catch (e) {
                err.innerText = "Server Error";
                btn.disabled = false;
            }
        }

        function enterDashboard(username) {
            localStorage.setItem('username', username);
            document.getElementById('auth-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            document.getElementById('user-display').innerText = "Hi, " + username;
        }

        function logout() {
            localStorage.removeItem('username');
            location.reload();
        }
    </script>
</body>
</html>